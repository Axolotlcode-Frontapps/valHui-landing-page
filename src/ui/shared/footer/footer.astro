---
import FacebookIcon from "@/assets/icons/facebook.svg";
import InstagramIcon from "@/assets/icons/instagram.svg";
import LinkedInIcon from "@/assets/icons/linkedin.svg";
import ValhuiIcon from "@/assets/icons/valhui-white.svg";
import { getContactLinks, getLegalsLinks, getLinks } from "@/lib/utils/links";

import { LinkList } from "@/ui/shared/link-list";

const links = getLinks();
const contactLinks = getContactLinks();
const legalsLinks = getLegalsLinks();

const socialLinks = [
  {
    label: "Facebook",
    icon: FacebookIcon,
    link: "https://www.facebook.com/profile.php?id=61583963682834",
  },
  {
    label: "Instagram",
    icon: InstagramIcon,
    link: "https://www.instagram.com/valhuimx/",
  },
  {
    label: "LinkedIn",
    icon: LinkedInIcon,
    link: "https://www.linkedin.com/company/valhui/",
  },
];
---

<footer class="section footer">
  <div class="section__container footer__container">
    <div class="footer__links">
      <div class="footer__about">
        <ValhuiIcon class="w-full max-w-[180px]" />
      </div>
      <LinkList
        title="Menú"
        items={links}
        wrapClass="text-center md:text-left"
        class="grid grid-cols-1 md text-[#FFFFFFB2] hover:text-secondary gap-y-2 mb-5 justify-items-center md:justify-items-start"
      />
      <LinkList
        title="Contáctanos"
        items={contactLinks}
        wrapClass="text-center md:text-left"
        class="grid grid-cols-1 text-[#FFFFFFB2] hover:text-secondary gap-y-2 mb-5 justify-items-center md:justify-items-start"
      />
    </div>
    <div class="footer__socials">
      {
        socialLinks.map(({ label, icon: Icon, link }) => (
          <a
            href={link}
            aria-label={label}
            target="_blank"
            class="flex w-fit bg-[#FFFFFF0D] p-3  rounded-[10px]"
          >
            {Icon ? <Icon /> : null}
          </a>
        ))
      }
    </div>
    <div class="footer__rights">
      <p class="w-fit">
        © {new Date().getFullYear()} ValHui Mall. Todos los derechos reservados.
      </p>
      <div class="w-fit flex gap-6">
        {
          legalsLinks.map(({ link, label }) => (
            <a href={link} class="text-sm text-[#FFFFFF99]">
              {label}
            </a>
          ))
        }
      </div>
    </div>
  </div>
</footer>

<style>
  @reference "@/ui/styles/global.css";

  .footer {
    @apply w-full px-4 pb-5 pt-16 bg-[#0F4571] text-[#D1D5DB];
  }
  .footer__container {
    @apply w-full justify-items-center md:justify-items-normal max-w-[1256px];
  }
  .footer__links {
    @apply grid grid-cols-1 md:grid-cols-3 gap-y-8 gap-x-0 gap-8 pb-7 items-center justify-items-center md:items-start md:justify-items-start;
  }
  .footer__description {
    @apply w-full my-4 text-sm text-[#FFFFFFB2] text-center md:text-left;
  }
  .footer__about {
    @apply w-full flex flex-col items-center justify-items-center md:items-start md:justify-items-start;
  }
  .footer__socials {
    @apply w-full flex items-center justify-start gap-4 mb-4 border-b border-[#FFFFFF1A] pb-6;
  }

  .footer__rights {
    @apply w-full flex flex-col md:flex-row md:justify-between gap-4 mt-8 mb-11 items-center text-center md:text-left text-[#FFFFFF99];
  }
</style>

<script>
  addEventListener("DOMContentLoaded", () => {
    const footerAnim = document.querySelector(".footer__container");

    (footerAnim as HTMLElement).style.opacity = "0";

    const observer = new IntersectionObserver(
      ([entry]) => {
        if (!entry) return;
        const isVisible = entry.isIntersecting;
        isVisible && footerAnim ? footerAnim.classList.add("fadeIn") : null;
      },
      { threshold: 0 },
    );
    footerAnim ? observer.observe(footerAnim) : null;
  });
</script>
