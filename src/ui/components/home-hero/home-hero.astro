---
import { buttonVariants } from "@/ui/shared/button";

import Video from "@/assets/videos/valhui-video.mp4";
import FallbackImg from "@/assets/images/hero-home.png";
import { ContactModal } from "@/ui/shared/contact-modal";

const lineTexts = [
	"3D Pestañas",
	"Acupuntura",
	"Aparatos auditivos",
	"Aparatos médicos",
	"Aparatos ortopédicos",
	"Arreglo de ropa",
	"Barbería hombre",
	"Bronceado",
	"Cámara hiperbárica",
	"Cejas",
	"Centro diabetes",
	"Centro podológico",
	"Centros auditivos",
	"Acupuntura",
	"Clínica antienvejecimiento",
	"Clínica bariatría",
	"Clínica dermatológica",
	"Clínica nutrición",
	"Dentista",
	"Depilado",
	"Equipos médicos",
	"Estética",
	"Extensiones o pelucas",
	"Farmacia",
	"Farmacia dermatológica",
	"Farmacia homeopática",
	"Fisioterapia",
	"GNC",
	"Laboratorio de análisis",
	"Laboratorio especializado",
	"Óptica",
	"Oxígeno terapia",
	"Pilates",
	"Productos naturistas",
	"Productos orgánicos",
	"Productos ortopédicos",
	"Productos para mascotas",
	"Quiropráctico",
	"Rehabilitación",
	"Ropa deportiva",
	"Ropa modeladora",
	"Skin Care",
	"Spa",
	"Terapia de lenguaje",
	"Tratamientos reductores",
	"Uñas (Manicure y Pedicure)",
	"Yoga",
	"Zapatería Ortopédica",
	"Cafetería Saludable",
	"Escuela de Maquillaje",
	"Heladería",
	"Librería",
	"Pan sin gluten",
	"Pastelería",
	"Comidas naturistas",
	"Snacks",
	"Súper naturista",
	"Cafetería saludable",
	"Escuela de maquillaje",
	"Escuelas de pintura",
	"Heladería",
	"Pan sin gluten",
	"Pastelería",
	"Comidas naturistas",
	"Snacks",
	"Super naturista",
	"Oficinas para empresas PyME",
];

const lineText = lineTexts.join("    •   ");
---

<section class="section hero-home" id="home">
  <div class="hero-home__overlay">
    <video
      width="100%"
      height="100%"
      autoplay
      loop
      muted
      playsinline
      poster={FallbackImg.src}
      class="hero-home__video"
    >
      <source src={Video} type="video/mp4" />
    </video>
  </div>
  <div class="section section__container hero-home__container">
    <div class="hero-home__info">
      <h1 class="hero-home__title">Espacios que impulsan tu negocio</h1>
      <p class="hero-home__description">
        Tu espacio ideal te está esperando en Reforma. Renta con ValHui y accede
        a oficinas, locales, consultorios y terrazas diseñadas para crecer con
        soporte de marketing y visibilidad garantizada.
      </p>
      <div class="hero-home__buttons">
        <ContactModal label="Renta un espacio" client:visible />
        <ContactModal
          label="Agendar una visita"
          className="bg-[#FFFFFF1A] hover:bg-white/30 border border-[#FFFFFF4D] hover:text-white"
          client:visible
        />
      </div>
    </div>
  </div>

  <div class="hero-home__line">
    <div class="hero-home__line-content">
      <span>{lineText}</span>
      <span>• {lineText}</span>
    </div>
  </div>
</section>

<style>
  @reference "@/ui/styles/global.css";

  .hero-home {
    background-image: var(--bgImage);
    @apply bg-cover bg-center relative;
  }

  .hero-home__overlay {
    @apply absolute inset-0 bg-linear-to-r from-black/20 via-black/15 to-black/10 z-0;
  }

  .hero-home__video {
    @apply w-full h-full object-cover aspect-9/16 md:aspect-video;
  }

  .hero-home__container {
    @apply min-h-[calc(100dvh-80px)] flex flex-col justify-center md:justify-end relative z-10;
  }
  .hero-home__info {
    @apply flex flex-col gap-8 text-white max-w-[764px] md:mb-28;
  }

  .hero-home__title {
    @apply font-bold text-5xl lg:text-6xl tracking-[0.26px];
  }

  .hero-home__description {
    @apply text-lg lg:text-xl tracking-[-0.45px] text-white/90 font-normal max-w-[664px];
  }

  .hero-home__buttons {
    @apply flex flex-col md:flex-row gap-4;
  }

  .hero-home__line {
    @apply absolute bottom-2.5 inset-x-0 w-full bg-[#FFFFFF1A] h-10.5 text-[#FFFFFF80] border-y border-[#FFFFFF33] flex items-center overflow-hidden;
  }

  .hero-home__line-content {
    @apply flex items-center gap-0;
    white-space: nowrap;
    will-change: transform;
    animation: hero-line-marquee 300s linear infinite;
  }

  .hero-home__line-content span {
    @apply inline-block px-4;
  }

  @keyframes hero-line-marquee {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-50%);
    }
  }
</style>

<script>
  addEventListener("DOMContentLoaded", () => {
    const data = document.querySelector(".hero-home");
    const points = document.querySelectorAll(".hero-home__info > *");

    (data as HTMLElement).style.opacity = "0";
    points.forEach((item) => {
      (item as HTMLElement).style.opacity = "0";
    });

    const dataObserver = new IntersectionObserver(
      ([entry]) => {
        if (!entry) return;
        const isVisible = entry.isIntersecting;
        isVisible && data ? data.classList.add("fadeIn") : null;
      },
      { threshold: 0 },
    );
    data && dataObserver.observe(data);

    points.forEach((item, index) => {
      const itemObserver = new IntersectionObserver(
        ([entry]) => {
          if (!entry) return;
          const isVisible = entry.isIntersecting;
          if (isVisible) {
            setTimeout(() => {
              item.classList.add("fadeInFromBottom");
            }, index * 180);
            itemObserver.unobserve(item);
          }
        },
        { threshold: 0 },
      );
      itemObserver.observe(item);
    });
  });
</script>
